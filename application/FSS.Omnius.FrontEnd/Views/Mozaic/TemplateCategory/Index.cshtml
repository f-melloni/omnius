@using FSS.Omnius.Modules.Entitron.Entity.Mozaic
@model System.Data.Entity.DbSet<FSS.Omnius.Modules.Entitron.Entity.Mozaic.TemplateCategory>
@Scripts.Render("~/Scripts/jquery.unobtrusive-ajax.min.js")

@{
    Page.Title = "Omnius Mozaic";
    Layout = "~/Views/Shared/_OmniusAdminLayout.cshtml";
    Page.ModuleClass = "mozaicComponentManagerModule";
}
@Html.Partial("~/Views/Mozaic/UpperPanel.cshtml");

<div id="lowerPanelSpinnerOverlay">
    <div class="spinner-2 largeSpinner">
        <div class="double-bounce1"></div>
        <div class="double-bounce2"></div>
    </div>
</div>
<div id="lowerPanel">
    <svg class="lowerLeftDecoration" width="540px" height="565px">
        <path d="M31 0 L31 28 L65 62 L376 62 L402 36" stroke="#457fa9" stroke-width="1" fill="none" />
        <path d="M31 357 L31 108 L65 74 L376 74 L402 100" stroke="#457fa9" stroke-width="1" fill="none" />
        <path d="M31 47 L52 68 L31 89 L10 68 Z" stroke="#457fa9" stroke-width="1" fill="none" />
    </svg>
    <div class="fa fa-edit lowerLeftDecorationEditSymbol"></div>
    <svg class="lowerRightDecoration" width="535px" height="565px">
        <path d="M507 28 L473 62 L220 62 L185 27 L185 0" stroke="#457fa9" stroke-width="1" fill="none" />
        <path d="M507 357 L507 108 L472 74 L238 74" stroke="#457fa9" stroke-width="1" fill="none" />
    </svg>
    <div id="ldapMenuArea" class="moduleSubMenuArea">
        @Html.ActionLink("New category", "Create", "TemplateCategory", new { @class = "btn btn-omnius-blue fa fa-plus" })
    </div>
    <div id="ContentContainer">
        <table class="table table-bordered table-striped table-omnius">
            <colgroup>
                <col>
                <col>
                <col width="100">
            </colgroup>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Templates</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (TemplateCategory t in Model)
                {
                    <tr>
                        <td>
                            @Ajax.RouteLink(t.Name, "Mozaic", new { @action = "Detail", @id = t.Id }, new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ContentContainer" })
                        </td>
                        <td>
                            @string.Join(", ", t.Templates.Select(x => x.Name))
                        </td>
                        <td>
                            @Ajax.RouteLink(" ", "Mozaic", new { @action = "Update", @id = t.Id }, new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ContentContainer" }, new { @class = "fa fa-pencil ico-only btn btn-primary" })
                            @Html.RouteLink(" ", "Mozaic", new { @action = "Delete", @id = t.Id }, new { @class = "fa fa-trash ico-only btn btn-danger" })
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
