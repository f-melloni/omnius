@{ Layout = "~/Views/Shared/_OmniusUserAppLayout.cshtml"; }@{ Dictionary<string, string> formState = (Dictionary<string, string>)ViewData["formState"]; }<div class="mozaicBootstrapPage"><form class="form-horizontal" method="post"><div class="container-fluid"><div class="row"><div class="col-xs-12"><h1 class="" style="margin: 35px 0;">@(@"Nová tabulka ")</h1></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label for="tableName_input" class="col-xs-12 col-sm-2">@(@"Název tabulky:")</label><div class="col-xs-12 col-sm-10"><input type="text" name="tableDisplayName_input" value="@(formState.ContainsKey("tableDisplayName_input") ? formState["tableDisplayName_input"] : (ViewData.ContainsKey("inputData_tableDisplayName_input") ? @ViewData["inputData_tableDisplayName_input"] : ""))" class="form-control" id="tableDisplayName_input" /></div></div><div class="form-group"><label for="" class="col-xs-12 col-sm-2">@(@"DB name:")</label><div class="col-xs-12 col-sm-10"><input type="text" name="tableName_input" value="@(formState.ContainsKey("tableName_input") ? formState["tableName_input"] : (ViewData.ContainsKey("inputData_tableName_input") ? @ViewData["inputData_tableName_input"] : ""))" class="form-control" id="tableName_input" /></div></div></div></div><div class="panel panel-default" style="margin: 20px 0;" ><div class="panel-heading"><h3 class="panel-title">Sloupce<button type="button" class="btn pull-right btn-xs btn-primary" name="button" value="addColumn_button" id="addColumn_button" data-toggle="modal" data-target="#ColumnModal" >Přidat sloupec<span class="fa fa-plus-circle" style="margin: 0 5px;"></span></button></h3></div><div class="panel-body"><div class="table-responsive"><table class="table table-striped table-condensed" id="columns_table"><thead ><tr class=""><th class="">@(@"#")</th><th class="hide">@(@"ID")</th><th class="hide">@(@"CustomTable_id")</th><th class="">@(@"Název sloupce")</th><th class="">@(@"Zobrazený název")</th><th class="">@(@"Typ")</th><th class="">@(@"Velikost")</th><th class="text-center">@(@"Unikátní")</th><th class="text-center">@(@"NULL")</th><th class="hide">@(@"Výchozí hodnota")</th><th class="text-center">@(@"Zobrazit")</th><th class="hide">@(@"Možnosti")</th><th class="hide">@(@"Validace")</th><th class="text-center">@(@"Povinné")</th><th class="">@(@"Element")</th><th class="">@(@"Prefix")</th><th class="">@(@"Suffix")</th><th class="hide">@(@"Help text")</th><th class="hide">@(@"Display inline")</th><th class="text-center" style="width:80px">@(@"Akce")</th></tr></thead><tbody class=""><tr class="hide" id="columnTemplate"><td class="text-right" data-column="num_order"></td><td class="hide" data-column="id"></td><td class="hide" data-column="CustomTable_id"></td><td class="" data-column="name"></td><td class="" data-column="display_name"></td><td class="" data-column="type"></td><td class="" data-column="length" data-max="false"></td><td class="text-center" data-column="is_unique" data-value="false"></td><td class="text-center" data-column="is_null" data-value="false"></td><td class="hide" data-column="default_value"></td><td class="text-center" data-column="display_in_form" data-value="false"></td><td class="hide" data-column="options"></td><td class="hide" data-column="validators"></td><td class="text-center" data-column="is_required" data-value="false"></td><td class="" data-column="input_type"></td><td class="" data-column="prefix"></td><td class="" data-column="suffix"></td><td class="hide" data-column="help_text"></td><td class="hide" data-column="display_inline" data-value="false"></td><td class="text-center text-nowrap"><span class="fa fa-arrows-v icon_move fa-fw" title="Přesunout"></span><span class="fa fa-pencil icon_edit fa-fw" style="margin:0px 6px" title="Edit"></span><span class="fa fa-remove icon_delete fa-fw" title="Smazat"></span></td></tr></tbody></table></div></div></div><div class="row"><div class="col-xs-12"><button type="button" class="btn btn-success pull-right" name="button" value="btnSave" id="btnSave" ><span class="fa fa-floppy-o"></span>&nbsp; Uložit</button><button type="submit" class="btn btn-default" name="button" value="back_button" id="back_button" ><span class="fa fa-th-list"></span>&nbsp; Zpět na seznam</button></div></div></div>@Html.AntiForgeryToken()</form><div class="modal fade" tabindex="-1" role="dialog" id="ColumnModal" style="display: none;"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button><h4 class="modal-title" id="hEditColumn">@(@"Editace sloupce")</h4><h4 class="modal-title" id="hNewColumn">@(@"Nový sloupec")</h4></div><div class="modal-body"><form class="form-horizontal" method="post" onsubmit="return false"><div ><ul class="nav nav-tabs"><li class="active"><a href="#tab-1" data-toggle="tab" aria-expanded="true" class="">@(@"Databáze")</a></li><li class=""><a href="#tab-2" data-toggle="tab" aria-expanded="false" class="">@(@"Frontend")</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-1"><div class="form-group empty-element"></div><div class="form-group form-group-sm"><label for="name" class="col-sm-2 col-xs-12">@(@"Název:")</label><div class="col-xs-12 col-sm-4"><input type="text" name="name" value="@(formState.ContainsKey("name") ? formState["name"] : (ViewData.ContainsKey("inputData_name") ? @ViewData["inputData_name"] : ""))" class="form-control" id="name" /></div><label for="default_value" class="col-sm-2 col-xs-12">@(@"Výchozí hodnota:")</label><div class="col-xs-12 col-sm-4"><input type="text" name="default_value" value="@(formState.ContainsKey("default_value") ? formState["default_value"] : (ViewData.ContainsKey("inputData_default_value") ? @ViewData["inputData_default_value"] : ""))" class="form-control" id="default_value" /></div></div><div class="form-group form-group-sm"><label for="type" class="col-sm-2 col-xs-12">@(@"Typ:")</label><div class="col-xs-12 col-sm-4">
<select name="type" class="form-control" id="type">
    <option value="" class="">@(@"-- vyberte --")</option><option value="varchar" class="">@(@"varchar")</option><option class="" value="bool">@(@"boolean")</option><option value="integer" class="">@(@"integer")</option><option value="float" class="">@(@"float")</option><option value="decimal" class="">@(@"decimal")</option><option value="dateTime" class="">@(@"dateTime")</option><option value="blob" class="">@(@"blob")</option>
    @{ if(ViewData["dropdownData_type"] != null) {
            foreach(var option in ((Dictionary<int, string>)ViewData["dropdownData_type"])) {
                <option value="@(option.Key)" @(ViewData.ContainsKey("dropdownSelection_type") && ViewData["dropdownSelection_type"].ToString() == option.Key.ToString() ? "selected" : "")>
                    @(option.Value)
                </option>
            }
        }
    }    
</select></div><label for="length" class="col-sm-2 col-xs-12">@(@"Délka sloupce:")</label><div class="col-xs-12 col-sm-4"><div class="input-group input-group-sm"><input type="number" name="length" value="@(formState.ContainsKey("length") ? formState["length"] : (ViewData.ContainsKey("inputData_length") ? @ViewData["inputData_length"] : ""))" class="form-control" id="length" min="1" /><div class="input-group-addon"><label for="" class="" style="margin-bottom:0px"><input type="checkbox" name="max_length" value="" class="" id="max_length" style="position: relative; top: 2px;" @((formState.ContainsKey("max_length") && formState["max_length"] == "on") || (ViewData.ContainsKey("checkboxData_max_length") && (ViewData["checkboxData_max_length"] as bool? == true)) ? " checked" : "") />&nbsp;MAX</label></div></div></div></div><div class="form-group form-group-sm"><label for="" class="col-sm-2">@(@"Nastavení:")</label><div class="col-xs-12 col-sm-10"><div class="checkbox-inline"><label for="is_unique" class=""><input type="checkbox" name="is_unique" value="" class="" id="is_unique" @((formState.ContainsKey("is_unique") && formState["is_unique"] == "on") || (ViewData.ContainsKey("checkboxData_is_unique") && (ViewData["checkboxData_is_unique"] as bool? == true)) ? " checked" : "") /> Unikátní</label></div><div class="checkbox-inline"><label for="is_null" class=""><input type="checkbox" name="is_null" value="" class="" id="is_null" @((formState.ContainsKey("is_null") && formState["is_null"] == "on") || (ViewData.ContainsKey("checkboxData_is_null") && (ViewData["checkboxData_is_null"] as bool? == true)) ? " checked" : "") /> Povolit NULL hodnotu</label></div></div></div></div><div class="tab-pane" id="tab-2"><div class="form-group empty-element"></div><div class="form-group form-group-sm"><label for="display_name" class="col-sm-2 col-xs-12">@(@"Zobrazený název:")</label><div class="col-xs-12 col-sm-4"><input type="text" name="display_name" value="@(formState.ContainsKey("display_name") ? formState["display_name"] : (ViewData.ContainsKey("inputData_display_name") ? @ViewData["inputData_display_name"] : ""))" class="form-control" id="display_name" /></div><label for="input_type" class="col-xs-12 col-sm-2">@(@"Typ pole:")</label><div class="col-xs-12 col-sm-4">
<select name="input_type" class="form-control" id="input_type">
    <option value="" class="">@(@"-- vyberte --")</option><option value="text" class="">@(@"text")</option><option value="email" class="">@(@"e-mail")</option><option value="color" class="">@(@"barva")</option><option value="tel" class="">@(@"telefonní číslo")</option><option value="number" class="">@(@"celé číslo")</option><option value="range" class="">@(@"rozsah")</option><option value="url" class="">@(@"URL")</option><option value="file" class="">@(@"soubor")</option><option value="select" class="">@(@"dropdown")</option><option value="date" class="">@(@"datum")</option><option value="time" class="">@(@"čas")</option><option value="datetime-local" class="">@(@"datum a čas")</option><option value="checkbox" class="">@(@"checkbox")</option><option value="radio" class="">@(@"radio")</option>
    @{ if(ViewData["dropdownData_input_type"] != null) {
            foreach(var option in ((Dictionary<int, string>)ViewData["dropdownData_input_type"])) {
                <option value="@(option.Key)" @(ViewData.ContainsKey("dropdownSelection_input_type") && ViewData["dropdownSelection_input_type"].ToString() == option.Key.ToString() ? "selected" : "")>
                    @(option.Value)
                </option>
            }
        }
    }    
</select></div></div><div class="form-group form-group-sm"><label for="validators" class="col-sm-2 col-xs-12">@(@"Atributy:")</label><div class="col-xs-12 col-sm-10"><input type="text" name="validators" value="@(formState.ContainsKey("validators") ? formState["validators"] : (ViewData.ContainsKey("inputData_validators") ? @ViewData["inputData_validators"] : ""))" class="form-control" id="validators" placeholder="např.: min=1; max=5 " /><p class="help-block">@(@"Zadávejte hodnoty atributů bez uvozovek a jednotlivé atributy oddělené středníkem. Např. pro validace.")</p></div></div><div class="form-group form-group-sm" id="formGroupOptions"><label for="options" class="col-sm-2">@(@"Možnosti:")</label><div class="col-xs-12 col-sm-10"><textarea class="form-control empty-element" name="options" value="" id="options" rows="5">@(formState.ContainsKey("options") ? formState["options"] : ViewData["inputData_options"])</textarea><p class="help-block">@(@"Zadejte každou možnost na nový řádek. Chcete-li použít jinou hodnotu a zobrazený text, zadejte ve formátu hodnota|text.")</p></div></div><div class="form-group form-group-sm" id="formGroupPrefixSuffix"><label for="prefix" class="col-sm-2 col-xs-12">@(@"Prefix pole:")</label><div class="col-xs-12 col-sm-4"><div class="input-group"><div class="input-group-addon"><span class="">@(@"prefix")</span></div><input type="text" name="prefix" value="@(formState.ContainsKey("prefix") ? formState["prefix"] : (ViewData.ContainsKey("inputData_prefix") ? @ViewData["inputData_prefix"] : ""))" class="form-control" id="prefix" /></div></div><label for="input_type" class="col-xs-12 col-sm-2">@(@"Suffix pole:")</label><div class="col-xs-12 col-sm-4"><div class="input-group"><input type="text" name="suffix" value="@(formState.ContainsKey("suffix") ? formState["suffix"] : (ViewData.ContainsKey("inputData_suffix") ? @ViewData["inputData_suffix"] : ""))" class="form-control" id="suffix" /><div class="input-group-addon"><span class="">@(@"suffix")</span></div></div></div></div><div class="form-group form-group-sm"><label for="help_text" class="col-sm-2 col-xs-12">@(@"Nápověda:")</label><div class="col-xs-12 col-sm-10"><input type="text" name="help_text" value="@(formState.ContainsKey("help_text") ? formState["help_text"] : (ViewData.ContainsKey("inputData_help_text") ? @ViewData["inputData_help_text"] : ""))" class="form-control" id="help_text" /><p class="help-block">@(@"Jako tento text pod polem")</p></div></div><div class="form-group form-group-sm"><label for="" class="col-sm-2 col-xs-12">@(@"Nastavení:")</label><div class="col-xs-12 col-sm-10"><div class="checkbox-inline"><label for="display_in_form" class=""><input type="checkbox" name="display_in_form" value="" class="" id="display_in_form" @((formState.ContainsKey("display_in_form") && formState["display_in_form"] == "on") || (ViewData.ContainsKey("checkboxData_display_in_form") && (ViewData["checkboxData_display_in_form"] as bool? == true)) ? " checked" : "") /> Zobrazit ve formuláři</label></div><div class="checkbox-inline"><label for="is_required" class=""><input type="checkbox" name="is_required" value="" class="" id="is_required" @((formState.ContainsKey("is_required") && formState["is_required"] == "on") || (ViewData.ContainsKey("checkboxData_is_required") && (ViewData["checkboxData_is_required"] as bool? == true)) ? " checked" : "") /> Povinné pole</label></div><div class="checkbox-inline"><label for="display_inline" class=""><input type="checkbox" name="display_inline" value="" class="" id="display_inline" @((formState.ContainsKey("display_inline") && formState["display_inline"] == "on") || (ViewData.ContainsKey("checkboxData_display_inline") && (ViewData["checkboxData_display_inline"] as bool? == true)) ? " checked" : "") /> Zobrazit inline</label></div></div></div></div></div></div>@Html.AntiForgeryToken()</form></div><div class="modal-footer"><button type="button" class="btn btn-default pull-left" data-dismiss="modal" name="button" value="btnColumnModalClose" id="btnColumnModalClose" >@(@"Zavřít")</button><button type="button" class="btn btn-primary" name="button" value="btnColumnModalSave" id="btnColumnModalSave" >@(@"Uložit")</button></div></div></div></div></div><script type="text/javascript" src="/Scripts/CommonLibraries/Other/vue.js"></script><script type="text/javascript" src="/Scripts/UserScripts/Application/Crm/CustomTableEdit.js"></script>