function ShowAppNotification(n,t){t=t.toLowerCase()||"info";$("#appNotificationArea .app-alert").remove();switch(t){case"success":icon="fa-check";break;case"error":icon="fa-exclamation-circle";break;case"warning":icon="fa-exclamation";break;case"info":default:icon="fa-info-circle"}newNotification=$('<div class="app-alert app-alert-'+t+'"><i class="fa '+icon+' alertSymbol"><\/i>'+n+'<div class="fa fa-times closeAlertIcon"><\/div><\/div>');$("#appNotificationArea").append(newNotification);newNotification.find(".closeAlertIcon").on("click",function(){$(this).parents(".app-alert").remove()})}function HidePanel(n){panel=$("#userContentArea").find('div[name="'+n+'"]');panel.is(":visible")&&(panelBottom=parseInt(panel.css("top"))+panel.height(),$(".mozaicForm > .uic").each(function(n,t){currentComponent=$(t);parseInt(currentComponent.css("top"))>panelBottom&&currentComponent.css("top",parseInt(currentComponent.css("top"))-panel.height())}),panel.hide())}function ShowPanel(n){panel=$("#userContentArea").find('div[name="'+n+'"]');panel.is(":visible")||(panel.show(),panelTop=parseInt(panel.css("top")),$(".mozaicForm > .uic").each(function(n,t){currentComponent=$(t);parseInt(currentComponent.css("top"))>panelTop&&currentComponent.css("top",parseInt(currentComponent.css("top"))+panel.height())}))}function ClonePanel(n){firstPanel=$("#userContentArea").find('div[name="'+n+'"]:first');lastPanel=$("#userContentArea").find('div[name="'+n+'"]:last');panelCount=$("#userContentArea").find('div[name="'+n+'"]').length;panelBottom=parseInt(lastPanel.css("top"))+lastPanel.height();$(".mozaicForm > .uic").each(function(n,t){currentComponent=$(t);parseInt(currentComponent.css("top"))>panelBottom&&currentComponent.css("top",parseInt(currentComponent.css("top"))+lastPanel.height()+10)});newPanel=firstPanel.clone(!0);newPanel.find('.uic, .uic checkbox, .uic input[type="radio"]').each(function(n,t){currentComponent=$(t);componentName=currentComponent.attr("name");componentName&&currentComponent.attr("name","panelCopy"+panelCount+"_"+componentName);componentId=currentComponent.attr("id");componentId&&currentComponent.attr("id","panelCopy"+panelCount+"_"+componentId)});newPanel.append('<input type="hidden", name="panelCopy'+panelCount+'Marker" value="true">');firstPanel.parents(".mozaicForm").append(newPanel);newPanel.css("top",panelBottom+10);newPanel.find("input.input-single-line, textarea").each(function(n,t){$(t).val("")});newPanel.find(".uic.input-with-datepicker").each(function(n,t){datePicker=$(t);datePicker.off("focus");datePicker.off("keydown");datePicker.off("keyup");datePicker.off("keypress");datePicker.removeClass("hasDatepicker");datePicker.datepicker($.datepicker.regional.cs)});removePanelIcon=$('<div class="fa fa-remove removePanelIcon"><\/div>');newPanel.append(removePanelIcon);removePanelIcon.on("click",function(){panel=$(this).parents(".panel-component");panelBottom=parseInt(panel.css("top"))+panel.height();$(".mozaicForm > .uic").each(function(n,t){currentComponent=$(t);parseInt(currentComponent.css("top"))>panelBottom&&currentComponent.css("top",parseInt(currentComponent.css("top"))-panel.height()-10)});autosumTarget=null;panel.find(".uic.input-single-line").each(function(n,t){autosumTargetName=$(t).attr("writeSumInto");autosumTargetName&&(autosumTarget=$('.uic[name="'+autosumTargetName+'"]'),sourceInputName=$(t).attr("name"))});panel.remove();autosumTarget&&(sourceInputNameWithoutPrefix=sourceInputName.indexOf("_")==-1?sourceInputName:sourceInputName.substring(sourceInputName.indexOf("_")+1,sourceInputName.length),sum=0,$(".uic.input-single-line").each(function(n,t){inputName=$(t).attr("name");inputName.indexOf(sourceInputNameWithoutPrefix,inputName-sourceInputNameWithoutPrefix.length)!==-1&&(numericValue=parseInt($(t).val()),isNaN(numericValue)||(multiplierTextbox=$(t).parents(".panel-component").find('[originalId="uic_pieces_textbox"]'),sum+=multiplierTextbox&&!isNaN(multiplierTextbox.val())&&multiplierTextbox.val()>0?numericValue*multiplierTextbox.val():numericValue))}),targetTemplate=autosumTarget.attr("contentTemplate"),targetTemplate?autosumTarget.text(targetTemplate.replace("{{var1}}",sum)):autosumTarget.text(sum))})}function RecalculateAutosum(n){autosumTarget=null;n.find(".uic.input-single-line").each(function(n,t){autosumTargetName=$(t).attr("writeSumInto");autosumTargetName&&(autosumTarget=$('.uic[name="'+autosumTargetName+'"]'),sourceInputName=$(t).attr("name"))});autosumTarget&&(sourceInputNameWithoutPrefix=sourceInputName.indexOf("panelCopy")==-1?sourceInputName:sourceInputName.substring(sourceInputName.indexOf("_")+1,sourceInputName.length),sum=0,$(".uic.input-single-line").each(function(n,t){inputName=$(t).attr("name");inputName.indexOf(sourceInputNameWithoutPrefix,inputName-sourceInputNameWithoutPrefix.length)!==-1&&(numericValue=parseInt($(t).val()),isNaN(numericValue)||(multiplierTextbox=$(t).parents(".panel-component").find('[originalId="uic_pieces_textbox"]'),sum+=multiplierTextbox&&!isNaN(multiplierTextbox.val())&&multiplierTextbox.val()>0?numericValue*multiplierTextbox.val():numericValue))}),targetTemplate=autosumTarget.attr("contentTemplate"),targetTemplate?autosumTarget.text(targetTemplate.replace("{{var1}}",sum)):autosumTarget.text(sum))}function HideOption(n){n.parent("span.hiddenOption").length==0&&n.wrap('<span class="hiddenOption" />')}function ShowOption(n){n.parent("span.hiddenOption").length&&n.unwrap()}function GetUrlParameter(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]}function RecalculateMozaicFormHeight(){var n=$("#userContentArea .mozaicForm"),t=n.height();n.find(".uic").each(function(n,i){currentUic=$(i);currentUic.position().top+currentUic.height()>t&&(t=currentUic.position().top+currentUic.height())});n.height(t+30)}function RecalculatePanelDimensions(n){var t=n.width(),i=n.hasClass("panelAutoHeight")?0:n.height();n.find(".uic").each(function(n,r){currentUic=$(r);currentUic.position().left+currentUic.width()+30>t&&(t=currentUic.position().left+currentUic.width()+30);currentUic.position().top+currentUic.height()+30>i&&(i=currentUic.position().top+currentUic.height()+30)});n.width(t);n.height(i)}function GetCurrentUserRoleArray(){return JSON.parse($("#currentUserRoleArray").val())}function UserHasRole(n){return GetCurrentUserRoleArray().indexOf(n)!=-1}function UserHasOneOfTheseRoles(n){return GetCurrentUserRoleArray().some(function(t){return n.indexOf(t)!=-1})}function InitDataTable(n){n.find("thead th").each(function(t,i){$(i).text()=="id"||$(i).text().indexOf("hidden__")==0?n.find("td:nth-child("+(t+1)+"), th:nth-child("+(t+1)+")").hide():($(i).text()=="Barva"||$(i).text()=="special__color_code")&&(n.find("td:nth-child("+(t+1)+"), th:nth-child("+(t+1)+")").hide(),n.find("td:nth-child("+(t+1)+")").each(function(n,i){if(!$(i).parents("tr").find("td:nth-child("+(t+2)+") .colorRectangle").length){var r=$(i).text();$(i).parents("tr").find("td:nth-child("+(t+2)+")").prepend('<div class="colorRectangle" style="background-color:'+r+'"><\/div>')}}))})}var pageSpinner,ModalDialogArray,mozaicFormValidator;$(function(){var t,u,i,r;if($("#currentBlockName").val()=="HlavniStranka")UserHasOneOfTheseRoles(["Admin","Coordinator"])&&$("#uic_auction_management_button").show();else if($("#currentBlockName").val()=="OvereniOrganizace"){t=!1;$("#uic_next_button").show().prop({disabled:!0});$("#uic_organizations_dropdown").on("change",function(){var n=$(this).val();n==-1?$("#uic_deposit_panel, #uic_give_up_panel, #uic_conditions_panel, #uic_next_button").prop({disabled:!0}):$.ajax({type:"POST",url:"/api/run/Aukcnisystem/"+$("#currentBlockName").val()+"/?button="+$(this).attr("name"),data:{targetId:$(this).val(),auctionId:GetUrlParameter("modelId")},success:function(n){t=n.deposit;$("#uic_next_button").prop({disabled:!n.accepted||!n.deposit});$("#uic_conditions_panel").toggle(!n.accepted);$("#uic_agree_checkbox input").prop({checked:n.accepted});$("#uic_deposit_panel").toggle(!n.deposit);$("#uic_give_up_panel").toggle(!n.gaveUp);$("#uic_lblGaveUp").prop({visible:n.gaveUp})}})});$("#uic_agree_checkbox input").on("click",function(){$("#uic_agree_checkbox input").prop("checked")?$("#uic_next_button").prop({disabled:!t}):$("#uic_next_button").prop({disabled:!0})})}else if($("#currentBlockName").val()=="VlozeniPoptavky"){u=JSON.parse(GetUrlParameter("registry"));$("input[name=agreeWithSpeedingUpProcess]").prop("checked",!0);i=$("#uic_obdobi_dropdown");r=$("#uic_obdobi_od_dropdown");$("#uic_obdobi_dropdown, #uic_obdobi_od_dropdown").change(function(){Number(r.val())>Number(i.val())?$("#uic_obdobi_od_dropdown_error").show():$("#uic_obdobi_od_dropdown_error").hide();r.attr("max",i.val());mozaicFormValidator.form()});function n(){$("#uic_provozni_objem_procenta_textbox_error").hide();$("#uic_tezebni_vykon_procenta_textbox_error").hide();$("#uic_vtlaceci_vykon_procenta_textbox_error").hide();Number($("#uic_provozni_objem_procenta_textbox").val())>100&&($("#uic_provozni_objem_procenta_textbox").is("[readonly]")&&$("#uic_provozni_objem_jednotky_textbox").is("[readonly]")||$("#uic_provozni_objem_procenta_textbox_error").show());Number($("#uic_tezebni_vykon_procenta_textbox").val())>100&&($("#uic_tezebni_vykon_procenta_textbox").is("[readonly]")&&$("#uic_tezebni_vykon_jednotky_textbox").is("[readonly]")||$("#uic_tezebni_vykon_procenta_textbox_error").show());Number($("#uic_vtlaceci_vykon_procenta_textbox").val())>100&&($("#uic_vtlaceci_vykon_procenta_textbox").is("[readonly]")&&$("#uic_vtlaceci_vykon_jednotky_textbox").is("[readonly]")||$("#uic_vtlaceci_vykon_procenta_textbox_error").show())}$.ajax({type:"POST",url:"/api/run/Aukcnisystem/"+$("#currentBlockName").val()+"/?button=amount_label",data:{AuctionId:u.Auction},success:function(t){for(var h,f,e,o,i,r,u,c=$("#uic_obdobi_dropdown"),l=$("#uic_obdobi_od_dropdown"),s=t.Auction.minimal_offer_period;s<=t.Auction.maximal_period;s++)c.append('<option value="'+s+'">'+s+"<\/option>"),l.append('<option value="'+s+'">'+s+"<\/option>");if(h=$("#uic_period_type_label").html(),$("#uic_period_type_label").html(h.replace("{var1}",t.Auction.id_period_type==5?"v měsících":"v letech")),t.Auction.id_type==10?(f=t.Auction.offered_injection_performance,e=t.Auction.mining_performace,o=t.Auction.offered_operating_volume):(f=t.Auction.offered_injection_performance*(1-t.DemandedFraction/100),e=t.Auction.mining_performace*(1-t.DemandedFraction/100),o=t.Auction.offered_operating_volume*(1-t.DemandedFraction/100)),t.Auction.id_item_value_type==22)switch(t.Auction.id_item_type){case 14:i=$("#uic_provozni_objem_procenta_textbox");i.on("input keypress change",function(){r=+$(this).val();$("#uic_tezebni_vykon_procenta_textbox, #uic_vtlaceci_vykon_procenta_textbox").val(r);t.Auction.offered_operating_volume>0&&$("#uic_provozni_objem_jednotky_textbox").val(r*o/100);t.Auction.mining_performace>0&&$("#uic_tezebni_vykon_jednotky_textbox").val(r*e/100);t.Auction.offered_injection_performance>0&&$("#uic_vtlaceci_vykon_jednotky_textbox").val(r*f/100);n()});break;case 15:i=$("#uic_tezebni_vykon_procenta_textbox");i.on("input keypress change",function(){r=+$(this).val();$("#uic_provozni_objem_procenta_textbox, #uic_vtlaceci_vykon_procenta_textbox").val($(this).val());t.Auction.offered_operating_volume>0&&$("#uic_provozni_objem_jednotky_textbox").val(r*o/100);t.Auction.mining_performace>0&&$("#uic_tezebni_vykon_jednotky_textbox").val(r*e/100);t.Auction.offered_injection_performance>0&&$("#uic_vtlaceci_vykon_jednotky_textbox").val(r*f/100);n()});break;case 16:i=$("#uic_vtlaceci_vykon_procenta_textbox");i.on("input keypress change",function(){r=+$(this).val();$("#uic_provozni_objem_procenta_textbox, #uic_tezebni_vykon_procenta_textbox").val($(this).val());t.Auction.offered_operating_volume>0&&$("#uic_provozni_objem_jednotky_textbox").val(r*o/100);t.Auction.mining_performace>0&&$("#uic_tezebni_vykon_jednotky_textbox").val(r*e/100);t.Auction.offered_injection_performance>0&&$("#uic_vtlaceci_vykon_jednotky_textbox").val(r*f/100);n()})}else switch(t.Auction.id_item_type){case 14:i=$("#uic_provozni_objem_jednotky_textbox");i.prop({max:t.Auction.offered_operating_volume});i.on("input keypress change",function(){u=+$(this).val()/o;t.Auction.mining_performace>0&&$("#uic_tezebni_vykon_jednotky_textbox").val(u*e);t.Auction.offered_injection_performance>0&&$("#uic_vtlaceci_vykon_jednotky_textbox").val(u*f);$("#uic_provozni_objem_procenta_textbox, #uic_tezebni_vykon_procenta_textbox, #uic_vtlaceci_vykon_procenta_textbox").val(u*100);n()});break;case 15:i=$("#uic_tezebni_vykon_jednotky_textbox");i.prop({max:t.Auction.mining_performace});i.on("input keypress change",function(){u=+$(this).val()/e;t.Auction.offered_operating_volume>0&&$("#uic_provozni_objem_jednotky_textbox").val(u*o);t.Auction.offered_injection_performance>0&&$("#uic_vtlaceci_vykon_jednotky_textbox").val(u*f);$("#uic_provozni_objem_procenta_textbox, #uic_tezebni_vykon_procenta_textbox, #uic_vtlaceci_vykon_procenta_textbox").val(u*100);n()});break;case 16:i=$("#uic_vtlaceci_vykon_jednotky_textbox");i.prop({max:t.Auction.offered_injection_performance});i.on("input keypress change",function(){u=+$(this).val()/f;t.Auction.mining_performace>0&&$("#uic_tezebni_vykon_jednotky_textbox").val(u*e);t.Auction.offered_operating_volume>0&&$("#uic_provozni_objem_jednotky_textbox").val(u*o);$("#uic_provozni_objem_procenta_textbox, #uic_tezebni_vykon_procenta_textbox, #uic_vtlaceci_vykon_procenta_textbox").val(u*100);n()})}i.removeClass("input-read-only").prop("readonly",!1);mozaicFormValidator.form()}})}else if($("#currentBlockName").val()=="NovaAukce"||$("#currentBlockName").val()=="EditaceAukce"){$("#uic_druh_aukce_dropdown").val()==11?($("#uic_konecna_cena_textbox").removeClass("input-read-only").prop("readonly",!1),$("#uic_umoznit_vyssi_poptavku_checkbox input").prop("checked",!0).prop("disabled",!0)):($("#uic_konecna_cena_textbox").addClass("input-read-only").prop("readonly",!0).val(""),$("#uic_umoznit_vyssi_poptavku_checkbox input").prop("disabled",!1));$("#uic_druh_aukce_dropdown").on("change",function(){$(this).val()==11?($("#uic_konecna_cena_textbox").removeClass("input-read-only").prop("readonly",!1),$("#uic_umoznit_vyssi_poptavku_checkbox input").prop("checked",!0).prop("disabled",!0)):($("#uic_konecna_cena_textbox").addClass("input-read-only").prop("readonly",!0).val(""),$("#uic_umoznit_vyssi_poptavku_checkbox input").prop("disabled",!1))});$("#uic_zpusob_jistoty_dropdown").val()==25?$("#uic_label11").text("Koeficient jistoty (%)"):$("#uic_label11").text("Minimální výše jistoty");$("#uic_zpusob_jistoty_dropdown").on("change",function(){$(this).val()==25?$("#uic_label11").text("Koeficient jistoty (%)"):$("#uic_label11").text("Minimální výše jistoty")});$("#uic_nabizeny_provozni_objem_textbox, #uic_nabizeny_vtlaceci_vykon_textbox, #uic_nabizeny_tezebni_vykon_textbox").on("change",function(){$("#uic_nabizeny_provozni_objem_textbox").val()!=""&&$("#uic_nabizeny_vtlaceci_vykon_textbox").val()!=""&&$("#uic_nabizeny_tezebni_vykon_textbox").val()!=""&&($("#uic_nabizeny_provozni_objem_textbox").val()>0&&$("#uic_nabizeny_vtlaceci_vykon_textbox").val()>=0&&$("#uic_nabizeny_tezebni_vykon_textbox").val()>=0||$("#uic_nabizeny_vtlaceci_vykon_textbox").val()>0&&$("#uic_nabizeny_provozni_objem_textbox").val()>=0&&$("#uic_nabizeny_tezebni_vykon_textbox").val()>=0||$("#uic_nabizeny_tezebni_vykon_textbox").val()>0&&$("#uic_nabizeny_provozni_objem_textbox").val()>=0&&$("#uic_nabizeny_vtlaceci_vykon_textbox").val()>=0)&&($("#uic_nabizeny_provozni_objem_textbox").removeClass("has-error"),$("#uic_nabizeny_vtlaceci_vykon_textbox").removeClass("has-error"),$("#uic_nabizeny_tezebni_vykon_textbox").removeClass("has-error"));$("#uic_nabizeny_provozni_objem_textbox").val()<=0&&$("#uic_nabizeny_vtlaceci_vykon_textbox").val()<=0&&$("#uic_nabizeny_tezebni_vykon_textbox").val()<=0&&($("#uic_nabizeny_provozni_objem_textbox").addClass("has-error"),$("#uic_nabizeny_vtlaceci_vykon_textbox").addClass("has-error"),$("#uic_nabizeny_tezebni_vykon_textbox").addClass("has-error"))});$("#uic_nabizeny_provozni_objem_textbox, #uic_nabizeny_vtlaceci_vykon_textbox, #uic_nabizeny_tezebni_vykon_textbox").on("blur",function(){$("#uic_nabizeny_provozni_objem_textbox").val()!=""&&$("#uic_nabizeny_vtlaceci_vykon_textbox").val()!=""&&$("#uic_nabizeny_tezebni_vykon_textbox").val()!=""&&($("#uic_nabizeny_provozni_objem_textbox").val()>0&&$("#uic_nabizeny_vtlaceci_vykon_textbox").val()>=0&&$("#uic_nabizeny_tezebni_vykon_textbox").val()>=0||$("#uic_nabizeny_vtlaceci_vykon_textbox").val()>0&&$("#uic_nabizeny_provozni_objem_textbox").val()>=0&&$("#uic_nabizeny_tezebni_vykon_textbox").val()>=0||$("#uic_nabizeny_tezebni_vykon_textbox").val()>0&&$("#uic_nabizeny_provozni_objem_textbox").val()>=0&&$("#uic_nabizeny_vtlaceci_vykon_textbox").val()>=0)&&($("#uic_nabizeny_provozni_objem_textbox").removeClass("has-error"),$("#uic_nabizeny_vtlaceci_vykon_textbox").removeClass("has-error"),$("#uic_nabizeny_tezebni_vykon_textbox").removeClass("has-error"));$("#uic_nabizeny_provozni_objem_textbox").val()<=0&&$("#uic_nabizeny_vtlaceci_vykon_textbox").val()<=0&&$("#uic_nabizeny_tezebni_vykon_textbox").val()<=0&&($("#uic_nabizeny_provozni_objem_textbox").addClass("has-error"),$("#uic_nabizeny_vtlaceci_vykon_textbox").addClass("has-error"),$("#uic_nabizeny_tezebni_vykon_textbox").addClass("has-error"))})}else $("#currentBlockName").val()=="PrehledPoptavekKola"&&setTimeout(function(){location.reload()},8e3);$("#uic_auction_countdown").length&&($("#uic_countdown_label").text()=="Aukce byla pozastavena"||$("#uic_countdown_label").text()=="Aukce již skončila"||$("#uic_countdown_label").text()=="Aukce byla zrušena")&&$("#uic_auction_countdown").hide();moment($("#uic_zacatek_skladovaciho_obdobi_datepicker").val(),"D.M.YYYY","cs")>=moment($("#uic_zacatek_aukce_datepicker").val(),"D.M.YYYY H:mm:ss","cs")&&$("#uic_zacatek_skladovaciho_obdobi_datepicker").val()!=""&&$("#uic_zacatek_aukce_datepicker").val()!=""?$("#uic_zacatek_skladovaciho_obdobi_datepicker").removeClass("has-error"):$("#uic_zacatek_skladovaciho_obdobi_datepicker").addClass("has-error");$("#uic_zacatek_skladovaciho_obdobi_datepicker, #uic_zacatek_aukce_datepicker").on("change",function(){moment($("#uic_zacatek_skladovaciho_obdobi_datepicker").val(),"D.M.YYYY","cs")>=moment($("#uic_zacatek_aukce_datepicker").val(),"D.M.YYYY H:mm:ss","cs")&&$("#uic_zacatek_skladovaciho_obdobi_datepicker").val()!=""&&$("#uic_zacatek_aukce_datepicker").val()!=""?$("#uic_zacatek_skladovaciho_obdobi_datepicker").removeClass("has-error"):$("#uic_zacatek_skladovaciho_obdobi_datepicker").addClass("has-error")})});$(document).ready(function(){$("#logoutLink").click(function(){return $("#logoutForm").submit(),!1})});pageSpinner=function(){var t=!1,n=1;return{show:function(i){arguments.length||(i=1);i&&$(document.body).addClass("pageSpinnerShown");n+=i;t&&(console.log("page spinner shown %d times, %d total",i,n),console.trace())},hide:function(i){arguments.length||(i=1);n-=i;n||$(document.body).removeClass("pageSpinnerShown");t&&(console.log("page spinner hidden %d times, %d remaining",i,n),console.trace())}}}();$(function(){pageSpinner.hide();$(window).on("beforeunload",function(){pageSpinner.show()})});ModalDialogArray=[];$(function(){$("#hideMenuIcon").on("click",function(){$("#userLeftBar").hide();$("#userLeftBarMinimized").show();$("#userContentArea").css("left",60);$("#helpContainer").css("left",60)});$("#showMenuIcon").on("click",function(){$("#userLeftBarMinimized").hide();$("#userLeftBar").show();$("#userContentArea").css("left",310);$("#helpContainer").css("left",310)});if(CurrentModuleIs("appManagerModule")){$(".appPanel").draggable({grid:[120,120],revert:"invalid",stop:function(){$(this).draggable("option","revert","invalid");$.ajax({type:"POST",url:"api/master/apps"+$(this).attr("data-target")+"/saveAppPosition",data:{positionX:$(this).css("left"),positionY:$(this).css("top")}})}});$(".appWorkspace").droppable({tolerance:"fit"});$(".appPanel").droppable({greedy:!0,tolerance:"touch",drop:function(n,t){t.draggable.draggable("option","revert",!0)}});$(".appPanel").bind("dragstart",function(n,t){t.originalPosition.top=$(this).position().top;t.originalPosition.left=$(this).position().left});$(".appPanel").on("dblclick",function(){window.location.href=$(this).attr("data-target")})}else CurrentModuleIs("helpModule")?($("#appManagerIcon").removeClass("activeIcon"),$("#helpIcon").addClass("activeIcon")):CurrentModuleIs("userDetailsModule")&&$("#appManagerIcon").removeClass("activeIcon");if($("#asPageContainer").length>0){$("#appMenu .menu-link").on("click",function(){$(".asMenuArea .submenu").hide();$("#"+$(this).data("menu-link-for")).show()});$(".uic").each(function(n,t){$(t).attr("originalId",$(t).attr("Id"))});$(".uic > checkbox").each(function(n,t){$(t).prop("checked",!1)});$.fn.dataTable.moment("D. M. YYYY H:mm:ss","cs");var n=$("#currentBlockName").val();try{$(".uic.data-table").each(function(t,i){var r=$(i),o=parseInt(r.attr("uicWidth")),e=$("html").attr("lang"),f,s,u;if(e==null&&(e="cs"),r.find("tbody tr").length){CreateDataTable(r,e,r.hasClass("data-table-simple-mode"));wrapper=r.parents(".dataTables_wrapper");wrapper.css("position","absolute");wrapper.css("left",r.css("left"));wrapper.css("top",r.css("top"));wrapper.css("width",o+5);r.css("width",o);r.removeClass("uic");wrapper.addClass("uic");r.css("position","relative");r.css("left","0px");r.css("top","0px");r.wrap("<div class='inner_wrapper'>");r.on("click",".rowEditAction",function(){rowId=parseInt($(this).parents("tr").find("td:first").text());$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+rowId+'" /><input type="hidden" name="button" value="datatable_edit" /><\/form>').appendTo("body").submit()});r.on("click",".rowDetailsAction",function(){rowId=parseInt($(this).parents("tr").find("td:first").text());$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+rowId+'" /><input type="hidden" name="button" value="datatable_detail" /><\/form>').appendTo("body").submit()});r.on("click",".rowDeleteAction",function(){if(confirm("Jste si jistí?")){rowId=parseInt($(this).parents("tr").find("td:first").text());var n=GetUrlParameter("modelId");$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+n+'" /><input type="hidden" name="deleteId" value="'+rowId+'" /><input type="hidden" name="button" value="datatable_delete" /><\/form>').appendTo("body").submit()}});r.on("click",".row_A_Action",function(){rowId=parseInt($(this).parents("tr").find("td:first").text());$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+rowId+'" /><input type="hidden" name="button" value="datatable_actionA" /><\/form>').appendTo("body").submit()});r.on("click",".row_B_Action",function(){rowId=parseInt($(this).parents("tr").find("td:first").text());$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+rowId+'" /><input type="hidden" name="button" value="datatable_actionB" /><\/form>').appendTo("body").submit()});dataTable=r.DataTable();r.hasClass("data-table-simple-mode")||(r.find("tfoot th").each(function(){var n=$(this).text();n!="Akce"?$(this).html('<input type="text" placeholder="Hledat v &quot;'+n+'&quot;" />'):$(this).html("")}),dataTable.columns().eq(0).each(function(n){$("input",dataTable.column(n).footer()).on("keyup change",function(){dataTable.column(n).search(this.value).draw()})}));u=r.attr("id");n=="HlavniStranka"&&u=="uic_auction_table"&&dataTable.order([[4,"asc"]]).draw();n=="HlavniStranka"&&u=="uic_history_table"&&dataTable.order([[4,"desc"]]).draw();n=="HistorieAukci"&&u=="uic_auction_table"&&dataTable.order([[4,"asc"]]).draw();n=="PrehledAktualnichAukci"&&u=="uic_auction_table"&&dataTable.order([[4,"asc"]]).draw();n=="SeznamOrganizaci"&&u=="uic_org_table"&&dataTable.order([[2,"asc"]]).draw();n=="SpravaOrganizaci"&&u=="uic_org_table"&&dataTable.order([[9,"desc"],[2,"asc"]]).draw();n=="DetailAukce"&&u=="uic_demands_table"&&dataTable.order([[2,"asc"]]).draw();n=="SpravaFinancnichJistotOrganizace"&&u=="uic_deposit_table"&&dataTable.order([[3,"asc"]]).draw();n=="SpravaFinancnichJistot"&&u=="uic_org_table"&&dataTable.order([[2,"asc"]]).draw()}else f=$("#"+r.attr("id")+"_IsEmpty"),f.length&&(s=f.html(),f.html('<div class="alert alert-info">'+s+"<\/div>"),f.removeClass("hidden")),r.hide(),r.parents(".dataTables_wrapper").eq(0).hide();r.parents(".panel-component").length>0&&(RecalculatePanelDimensions(r.parents(".panel-component")),RecalculateMozaicFormHeight())})}catch(t){console.log(t)}$.extend($.validator.methods,{greaterThan:function(n,t,i){return this.optional(t)||+n>+i}});$.extend($.validator.methods,{greaterOrEqual:function(n,t,i){return this.optional(t)||+n>=+i}});mozaicFormValidator=$(".mozaicForm").validate({errorLabelContainer:$("<div>"),ignore:"[readonly]",unhighlight:function(n){$(".uic[ignoredonvalidation]").addClass("cancel");$(n).removeClass("has-error");this.numberOfInvalids()===0&&$("[disableOnError]").removeClass("looks-disabled")},highlight:function(n){$(".uic[ignoredonvalidation]").addClass("cancel");$(n).addClass("has-error");$("[disableOnError]").addClass("looks-disabled")}});mozaicFormValidator.form();$(".uic.input-with-datepicker").datetimepicker({datepicker:!0,timepicker:!1,format:"d.m.Y"});$(".uic.input-with-timepicker").datetimepicker({datepicker:!1,timepicker:!0,step:5,format:"H:i:00"});$(".uic.input-with-datetimepicker").datetimepicker({datepicker:!0,timepicker:!0,step:5,format:"d.m.Y H:i:00"});$(".uic.color-picker").each(function(n,t){newComponent=$(t);CreateColorPicker(newComponent);newReplacer=$("#userContentArea .sp-replacer:last");newReplacer.css("position","absolute");newReplacer.css("left",newComponent.css("left"));newReplacer.css("top",newComponent.css("top"));newComponent.removeClass("uic");newReplacer.addClass("uic color-picker");newReplacer.attr("uicClasses","color-picker");newReplacer.attr("uicName",newComponent.attr("uicName"))});$(".uic.countdown-component").each(function(n,t){var r=$(t).attr("countdownTarget"),u,i;u=r?moment(r,moment.ISO_8601).toDate():new Date("1970-1-1");$(t).countdown({until:u,format:"HMS",onExpiry:function(){setTimeout(function(){location.reload()},8e3)}});$("#uic_auction_countdown").length>0&&$("#uic_countdown_label").text()!="Aukce byla pozastavena"&&$("#uic_countdown_label").text()!="Aukce již skončila"&&$("#uic_countdown_label").text()!="Aukce byla zrušena"&&(i=!0,$(".countdown-amount","#uic_auction_countdown").each(function(){$(this).text()!="0"&&(i=!1)}),i&&setTimeout(function(){location.reload()},8e3))});$(".uic.input-single-line").each(function(n,t){if(newComponent=$(t),autosumTargetName=newComponent.attr("writeSumInto"),autosumTargetName)newComponent.on("change",function(){autosumTargetName=$(this).attr("writeSumInto");autosumTarget=$('.uic[name="'+autosumTargetName+'"]');sourceInputName=$(this).attr("name");sourceInputNameWithoutPrefix=sourceInputName.indexOf("_")==-1?sourceInputName:sourceInputName.substring(sourceInputName.indexOf("_")+1,sourceInputName.length);sum=0;$(".uic.input-single-line").each(function(n,t){inputName=$(t).attr("name");inputName.indexOf(sourceInputNameWithoutPrefix,inputName-sourceInputNameWithoutPrefix.length)!==-1&&(numericValue=parseInt($(t).val()),isNaN(numericValue)||(multiplierTextbox=$(t).parents(".panel-component").find('[originalId="uic_pieces_textbox"]'),sum+=multiplierTextbox&&!isNaN(multiplierTextbox.val())&&multiplierTextbox.val()>0?numericValue*multiplierTextbox.val():numericValue))});autosumTarget=$('.uic[name="'+autosumTargetName+'"]');targetTemplate=autosumTarget.attr("contentTemplate");targetTemplate?autosumTarget.text(targetTemplate.replace("{{var1}}",sum)):autosumTarget.text(sum)})});$(".uic.input-single-line").on("change",function(){$(this).attr("originalId")=="uic_pieces_textbox"&&$(this).parents(".panel-component")&&RecalculateAutosum($(this).parents(".panel-component"))});$(".uic.panel-component").each(function(n,t){var i=$(t),r;if(i.hasClass("visible-panel-pale-background"),r=i.collision(".uic.visible-panel-pale-background"),r.length>1&&r.each(function(n,t){var r=$(t);r.attr("id")!=i.attr("id")&&(r.position().top>i.position().top?r.css("top",i.position().top+i.height()+10):i.css("top",r.position().top+r.height()+10))}),hidingCheckboxName=i.attr("panelHiddenBy"),hidingCheckboxName&&(hidingCheckbox=$('input[name="'+hidingCheckboxName+'"]'),hidingCheckbox)){hidingCheckbox.attr("panelToHide",i.attr("name"));hidingCheckbox.prop("checked",!0);hidingCheckbox.on("change",function(){panelToHide=$(this).attr("panelToHide");$(this).is(":checked")?ShowPanel(panelToHide):HidePanel(panelToHide)})}if(cloningButtonName=i.attr("panelClonedBy"),cloningButtonName&&(cloningButton=$('button[buttonName="'+cloningButtonName+'"]'),cloningButton)){cloningButton.attr("type","button");cloningButton.attr("panelToClone",i.attr("name"));cloningButton.on("click",function(){panelToClone=$(this).attr("panelToClone");ClonePanel(panelToClone)})}});n=$("#currentBlockDisplayName").val();$("#appMenu li").each(function(t,i){menuLi=$(i);menuLi.text().trim()==n&&menuLi.addClass("active")});n=="Hlavní stránka"&&$("#appMenu li:first").addClass("active");RecalculateMozaicFormHeight();$("#modalRepository .modalRepositoryItem").each(function(n,t){currentDialog=$(t);currentDialog.dialog({autoOpen:!1,width:370,height:320,buttons:{OK:function(){alert("TODO: Save");$(this).dialog("close")},"Zrušit":function(){$(this).dialog("close")}}});ModalDialogArray.push(currentDialog)});notificationMessage=GetUrlParameter("message");notificationMessage&&(notificationType=GetUrlParameter("messageType"),ShowAppNotification(notificationMessage,notificationType))}$(".name-value-list td").each(function(){$(this).text()=="__hide__"&&$(this).parents("tr").eq(0).hide()})});