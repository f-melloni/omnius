function AjaxRunAndReplace(n,t,i){$.ajax({type:"POST",url:"/api/run"+n+"?button="+t,data:{modelId:i},error:console.error.bind(console),success:function(n){$.each(n,function(n,t){if($("select#uic_"+n).size()>0){var i="";$.each(t,function(n,t){i+='<option value="'+t.id+'">'+t.Name+"<\/option>"});$("select#uic_"+n).html(i)}else $("input#uic_"+n).size()>0&&$("input#uic_"+n).val(t)})}})}function ShowAppNotification(n,t){var t=t.toLowerCase()||"info",i;switch(t){case"success":icon="fa-check";break;case"error":icon="fa-exclamation-circle";break;case"warning":icon="fa-exclamation";break;case"info":default:t="info";icon="fa-info-circle"}i=$('<div class="app-alert app-alert-'+t+'"><i class="fa '+icon+' alertSymbol"><\/i><span><\/span><div class="fa fa-times closeAlertIcon"><\/div><\/div>');i.find("span").text(n);$("#appNotificationArea").append(i);$("#upperPanel, #lowerPanel, #minimizedUpperPanel, #userContentArea").css({top:"+="+i.outerHeight()+"px"});CurrentModuleIs("tapestryModule")?RecalculateToolboxHeight():CurrentModuleIs("mozaicEditorModule")&&RecalculateMozaicToolboxHeight();i.find(".closeAlertIcon").on("click",function(){$("#upperPanel, #lowerPanel, #minimizedUpperPanel, #userContentArea").css({top:"-="+i.outerHeight()+"px"});$(this).parents(".app-alert").remove();CurrentModuleIs("tapestryModule")?RecalculateToolboxHeight():CurrentModuleIs("mozaicEditorModule")&&RecalculateMozaicToolboxHeight()})}function HidePanel(n){panel=$("#userContentArea").find('div[name="'+n+'"]');panel.is(":visible")&&(panelBottom=parseInt(panel.css("top"))+panel.height(),$(".mozaicForm > .uic").each(function(n,t){currentComponent=$(t);parseInt(currentComponent.css("top"))>panelBottom&&currentComponent.css("top",parseInt(currentComponent.css("top"))-panel.height())}),panel.hide())}function ShowPanel(n){panel=$("#userContentArea").find('div[name="'+n+'"]');panel.is(":visible")||(panel.show(),panelTop=parseInt(panel.css("top")),$(".mozaicForm > .uic").each(function(n,t){currentComponent=$(t);parseInt(currentComponent.css("top"))>panelTop&&currentComponent.css("top",parseInt(currentComponent.css("top"))+panel.height())}))}function ClonePanel(n){firstPanel=$("#userContentArea").find('div[name="'+n+'"]:first');lastPanel=$("#userContentArea").find('div[name="'+n+'"]:last');panelCount=$("#userContentArea").find('div[name="'+n+'"]').length;panelBottom=parseInt(lastPanel.css("top"))+lastPanel.height();$(".mozaicForm > .uic").each(function(n,t){currentComponent=$(t);parseInt(currentComponent.css("top"))>panelBottom&&currentComponent.css("top",parseInt(currentComponent.css("top"))+lastPanel.height()+10)});newPanel=firstPanel.clone(!0);newPanel.find('.uic, .uic checkbox, .uic input[type="radio"]').each(function(n,t){currentComponent=$(t);componentName=currentComponent.attr("name");componentName&&currentComponent.attr("name","panelCopy"+panelCount+"_"+componentName);componentId=currentComponent.attr("id");componentId&&currentComponent.attr("id","panelCopy"+panelCount+"_"+componentId)});newPanel.append('<input type="hidden", name="panelCopy'+panelCount+'Marker" value="true">');firstPanel.parents(".mozaicForm").append(newPanel);newPanel.css("top",panelBottom+10);newPanel.find("input.input-single-line, textarea").each(function(n,t){$(t).val("")});newPanel.find('.uic[originalId="uic_pieces_textbox"]').val(1);newPanel.find(".uic.input-with-datepicker").each(function(n,t){datePicker=$(t);datePicker.off("focus");datePicker.off("keydown");datePicker.off("keyup");datePicker.off("keypress");datePicker.removeClass("hasDatepicker");datePicker.datepicker($.datepicker.regional.cs)});removePanelIcon=$('<div class="fa fa-remove removePanelIcon"><\/div>');newPanel.append(removePanelIcon);removePanelIcon.on("click",function(){panel=$(this).parents(".panel-component");panelBottom=parseInt(panel.css("top"))+panel.height();$(".mozaicForm > .uic").each(function(n,t){currentComponent=$(t);parseInt(currentComponent.css("top"))>panelBottom&&currentComponent.css("top",parseInt(currentComponent.css("top"))-panel.height()-10)});autosumTarget=null;panel.find(".uic.input-single-line").each(function(n,t){autosumTargetName=$(t).attr("writeSumInto");autosumTargetName&&(autosumTarget=$('.uic[name="'+autosumTargetName+'"]'),sourceInputName=$(t).attr("name"))});panel.remove();autosumTarget&&(sourceInputNameWithoutPrefix=sourceInputName.indexOf("_")==-1?sourceInputName:sourceInputName.substring(sourceInputName.indexOf("_")+1,sourceInputName.length),sum=0,$(".uic.input-single-line").each(function(n,t){inputName=$(t).attr("name");inputName.indexOf(sourceInputNameWithoutPrefix,inputName-sourceInputNameWithoutPrefix.length)!==-1&&(numericValue=parseInt($(t).val()),isNaN(numericValue)||(multiplierTextbox=$(t).parents(".panel-component").find('[originalId="uic_pieces_textbox"]'),sum+=multiplierTextbox&&!isNaN(multiplierTextbox.val())&&multiplierTextbox.val()>0?numericValue*multiplierTextbox.val():numericValue))}),targetTemplate=autosumTarget.attr("contentTemplate"),targetTemplate?autosumTarget.text(targetTemplate.replace("{{var1}}",sum)):autosumTarget.text(sum))})}function RecalculateAutosum(n){autosumTarget=null;n.find(".uic.input-single-line").each(function(n,t){autosumTargetName=$(t).attr("writeSumInto");autosumTargetName&&(autosumTarget=$('.uic[name="'+autosumTargetName+'"]'),sourceInputName=$(t).attr("name"))});autosumTarget&&(sourceInputNameWithoutPrefix=sourceInputName.indexOf("panelCopy")==-1?sourceInputName:sourceInputName.substring(sourceInputName.indexOf("_")+1,sourceInputName.length),sum=0,$(".uic.input-single-line").each(function(n,t){inputName=$(t).attr("name");inputName.indexOf(sourceInputNameWithoutPrefix,inputName-sourceInputNameWithoutPrefix.length)!==-1&&(numericValue=parseInt($(t).val()),isNaN(numericValue)||(multiplierTextbox=$(t).parents(".panel-component").find('[originalId="uic_pieces_textbox"]'),sum+=multiplierTextbox&&!isNaN(multiplierTextbox.val())&&multiplierTextbox.val()>0?numericValue*multiplierTextbox.val():numericValue))}),targetTemplate=autosumTarget.attr("contentTemplate"),targetTemplate?autosumTarget.text(targetTemplate.replace("{{var1}}",sum)):autosumTarget.text(sum))}function HideOption(n){n.parent("span.hiddenOption").length==0&&n.wrap('<span class="hiddenOption" />')}function ShowOption(n){n.parent("span.hiddenOption").length&&n.unwrap()}function GetUrlParameter(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]}function RecalculateMozaicFormHeight(){var t=$("#userContentArea .mozaicForm"),i=t.height(),r=t.find("> .panel-component"),n,u;r.sort(function(n,t){return $(n).position().top-$(t).position().top});n=null;u=0;r.each(function(t,i){var r=$(i);if(n!==null){var f=r.position().top,e=r.position().top+r.height(),o=n.position().top,u=parseInt(n.position().top+n.height());f<u+10&&r.css("top",u+10)}n=r});t.find("> .uic").each(function(n,t){currentUic=$(t);currentUic.position().top+currentUic.height()>i&&(i=currentUic.position().top+currentUic.height())});t.height(i+30)}function RecalculatePanelDimensions(n){var t=n.width(),i=n.hasClass("panelAutoHeight")?0:n.height();n.find(".uic, .dataTables_wrapper").each(function(r,u){currentUic=$(u);currentUic.position().left+currentUic.width()+30>t&&(n.hasClass("named-panel")&&currentUic.parent().css("overflow")!="visible"||(t=currentUic.position().left+currentUic.width()+30));currentUic.position().top+currentUic.height()+30>i&&(i=currentUic.position().top+currentUic.height()+30)});n.width(t);n.height(i)}function CurrentModuleIs(n){return $("body").hasClass(n)?!0:!1}function CreateCzechDataTable(n,t){featureSwitch=!t;n.DataTable({paging:featureSwitch,pageLength:50,lengthMenu:[[10,20,50,100,200,500,1e3,-1],[10,20,50,100,200,500,1e3,"Vše"]],info:featureSwitch,filter:featureSwitch,order:[[0,"desc"]],language:{sEmptyTable:"Tabulka neobsahuje žádná data",sInfo:"Zobrazuji _START_ až _END_ z celkem _TOTAL_ záznamů",sInfoEmpty:"Zobrazuji 0 až 0 z 0 záznamů",sInfoFiltered:"(filtrováno z celkem _MAX_ záznamů)",sInfoPostFix:"",sInfoThousands:" ",sLengthMenu:"Zobraz záznamů _MENU_",sLoadingRecords:"Načítám...",sProcessing:"Provádím...",sSearch:"Hledat:",sZeroRecords:"Žádné záznamy nebyly nalezeny",oPaginate:{sFirst:"První",sLast:"Poslední",sNext:"Další",sPrevious:"Předchozí"},oAria:{sSortAscending:": aktivujte pro řazení sloupce vzestupně",sSortDescending:": aktivujte pro řazení sloupce sestupně"}}})}function CreateColorPicker(n){n.spectrum({showPaletteOnly:!0,togglePaletteOnly:!0,togglePaletteMoreText:"more",togglePaletteLessText:"less",color:"#f00",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]})}var pageSpinner,ModalDialogArray,mozaicFormValidator,message,style;$("body").on("click",".runAjax",function(n){n.preventDefault();AjaxRunAndReplace(window.location.pathname,$(this).val())});$(function(){var n='<div class="spinner-3"> <div class="rect1"><\/div> <div class="rect2"><\/div> <div class="rect3"><\/div> <div class="rect4"><\/div> <div class="rect5"><\/div> <\/div>',u,r,t;if($("#currentBlockName").val()=="VyjadreniKAuditu"||"VracenoKPrepracovaniNadrizenym")$("[name=radio_agree]").on("change",function(){$(this).val()==="true"?($("[name=DUVOD_NESOUHLASU_textbox]").prop("readonly",!0),$("[name=DUVOD_NESOUHLASU_textbox]").prop("required",!1)):($("[name=DUVOD_NESOUHLASU_textbox]").prop("readonly",!1),$("[name=DUVOD_NESOUHLASU_textbox]").prop("required",!0))});else if($("#currentBlockName").val()=="ZadaniObjednavkyPeriodika"){$("#uic_begin_dtpicker").val("01.01.2017");$("#uic_end_dtpicker").val("31.12.2017");u=$("#uic_user_select_dropdown");pageSpinner.show();$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button=user_select_label",data:{},error:console.error.bind(console),complete:function(){pageSpinner.hide()},success:function(n){if($("#uic_user_select_dropdown option[value != '-1']").remove(),$("#uic_user_select_dropdown").append('<option value="'+n.user.RweId+'">Za sebe<\/option>'),n.managers)for(i=0;i<n.managers.length;i++)$("#uic_user_select_dropdown").append('<option value="'+n.managers[i].manager_id+'">'+n.managers[i].manager_full_name+"<\/option>");$("#uic_user_select_dropdown").val(n.user.RweId);n.superior&&$("#uic_supperior_textbox").val(n.superior.DisplayName)}});$("body").on("change","#uic_user_select_dropdown",function(){var t=$(n).attr({id:"approver_select_dropdown_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this);$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button="+$(this).attr("name"),data:{targetId:$(this).val()},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){$("#uic_subscriber_textbox").val(n.user[0].full_name);$("#uic_ns_textbox").val(n.user[0].kostl);$("#uic_company_textbox").val(n.user[0].Company);n.superior&&$("#uic_supperior_textbox").val(n.superior.DisplayName)}})});$("body").on("change","#uic_periodical_dropdown",function(){var t=$(n).attr({id:"approver_select_dropdown_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this);$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button="+$(this).attr("name"),data:{targetId:$(this).val(),userId:$("#uic_user_select_dropdown").val()?$("#uic_user_select_dropdown").val():0},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){$("#uic_interval_dropdown option").each(function(t,i){option=$(i);option.attr("value")==n.periodical.id_periodical_interval?ShowOption(option):HideOption(option)});$("#uic_form_dropdown option").each(function(t,i){option=$(i);option.attr("value")==n.periodical.id_periodical_form?ShowOption(option):HideOption(option)});$("#uic_type_dropdown option").each(function(t,i){option=$(i);option.attr("value")==n.periodical.id_periodical_types?ShowOption(option):HideOption(option)});n.user[0]&&(n.periodical.id_periodical_form==1?$("#uic_ship_to_textbox").val(n.user[0].email):$("#uic_ship_to_textbox").val(n.user[0].stras+" "+n.user[0].hsnmr+", "+n.user[0].pstlz+" "+n.user[0].ort01));$('.uic[uicRole="price"]').val(n.periodical.tentatively_net_of_VAT10);$('.uic[uicRole="output"]').val(n.periodical.tentatively_net_of_VAT10*parseInt($('.uic[uicRole="count"]').val()))}})});$("body").on("change",'.uic[uicRole="count"]',function(){$('.uic[uicRole="output"]').val($('.uic[uicRole="price"]').val()*parseInt($('.uic[uicRole="count"]').val()))})}else if($("#currentBlockName").val()=="HromadnaObjednavkaProAsistentky"){$("#uic_approver_textbox").on("change",function(){var t=$(n).attr({id:"approver_select_dropdown_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this);$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button="+$(this).attr("name"),data:{SearchQuery:$(this).val()},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){for($("#uic_approver_select_dropdown option[value != '-1']").remove(),i=0;i<n.UserList.length;i++)currentUser=n.UserList[i],$("#uic_approver_select_dropdown").append('<option value="'+currentUser.id+'">'+currentUser.vorna+" "+currentUser.nachn+"<\/option>")}})});$("#uic_approver_select_dropdown").on("change",function(){var t=$(n).attr({id:"approver_select_dropdown_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this);$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button="+$(this).attr("name"),data:{targetId:$(this).val()},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){$("#uic_occupation_select_dropdown option[value != '-1']").remove();n.user.length>0&&$("#uic_occupation_select_dropdown").append('<option value="'+n.user[0].JobObjid+'">'+n.user[0].Job+"<\/option>")}})});$(".dropdown-select").on("change",function(){var t;$(this).attr("originalId")=="uic_periodical_dropdown"?(t=$(n).attr({id:"approver_select_dropdown_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this),panel=$(this).parents(".uic.panel-component"),dropdownName=$(this).attr("name"),dropdownName.startsWith("panelCopy")&&(dropdownName=dropdownName.substring(dropdownName.indexOf("_")+1,dropdownName.length)),$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button="+dropdownName,data:{targetId:$(this).val(),userId:panel.find('[originalId="uic_subscriber_name_select_dropdown"]').val()?panel.find('[originalId="uic_subscriber_name_select_dropdown"]').val():0},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){panel.find('[originalId="uic_interval_dropdown"] option').each(function(t,i){option=$(i);option.attr("value")==n.periodical.id_periodical_interval?ShowOption(option):HideOption(option)});panel.find('[originalId="uic_form_dropdown"] option').each(function(t,i){option=$(i);option.attr("value")==n.periodical.id_periodical_form?ShowOption(option):HideOption(option)});panel.find('[originalId="uic_type_dropdown"] option').each(function(t,i){option=$(i);option.attr("value")==n.periodical.id_periodical_types?ShowOption(option):HideOption(option)});panel.find('[originalId="uic_prince_vat_10_textbox"]').val(n.periodical.tentatively_net_of_VAT10);RecalculateAutosum(panel);n.user[0]&&(n.periodical.id_periodical_form==1?panel.find('[originalId="uic_address_textbox"]').val(n.user[0].email):panel.find('[originalId="uic_address_textbox"]').val(n.user[0].stras+" "+n.user[0].hsnmr+", "+n.user[0].pstlz+" "+n.user[0].ort01))}})):$(this).attr("originalId")=="uic_subscriber_name_select_dropdown"&&this.value&&(t=$(n).attr({id:"approver_select_dropdown_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this),panel=$(this).parents(".uic.panel-component"),dropdownName=$(this).attr("name"),dropdownName.startsWith("panelCopy")&&(dropdownName=dropdownName.substring(dropdownName.indexOf("_")+1,dropdownName.length)),$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button=approver_select_dropdown",data:{targetId:$(this).val()},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){var t=n.user[0];panel.find('.uic[originalId="uic_subscriber_occupation_select_dropdown"]').append('<option value="'+t.Job+'">'+t.Job+"<\/option>");panel.find('.uic[originalId="uic_function_textbox"]').val(t.Job);panel.find('.uic[originalId="uic_address_textbox"]').val(t.stras+" "+t.hsnmr+", "+t.pstlz+" "+t.ort01);panel.find('.uic[originalId="uic_company_textbox"]').val(t.Company);panel.find('.uic[originalId="uic_ns_textbox"]').val(t.kostl);panel.find('.uic[originalId="uic_subscriber_full_name_textbox"]').val(t.full_name)}}))});$("#uic_reciever_textbox").trackInputDone(function(){if($(this).attr("originalId")=="uic_reciever_textbox"){var t=$(n).attr({id:"approver_select_dropdown_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this);panel=$(this).parents(".uic.panel-component");dropdownName=$(this).attr("name");dropdownName.startsWith("panelCopy")&&(dropdownName=dropdownName.substring(dropdownName.indexOf("_")+1,dropdownName.length));$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button=approver_textbox",data:{SearchQuery:$(this).val()},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){for(targetDropdown=panel.find('.uic[originalId="uic_subscriber_name_select_dropdown"]'),targetDropdown.find("option[value != '-1']").remove(),i=0;i<n.UserList.length;i++)currentUser=n.UserList[i],targetDropdown.append('<option value="'+currentUser.id+'">'+currentUser.vorna+" "+currentUser.nachn+"<\/option>")}})}})}else if($("#currentBlockName").val()=="SchvaleniObjednavkyPeriodika")$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button=periodical_textbox",data:{targetId:GetUrlParameter("modelId")},error:console.error.bind(console),success:function(n){$("#uic_periodical_textbox").val(n.PeriodicalName);$("#uic_interval_textbox").val(n.PeriodicalInterval);$("#uic_form_textbox").val(n.PeriodicalForm);$("#uic_type_textbox").val(n.PeriodicalType)}});else if($("#currentBlockName").val()=="EditaceObjednavky")$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button=periodical_textbox",data:{targetId:GetUrlParameter("modelId")},error:console.error.bind(console),success:function(n){dataRow=n.ViewData[0];$("#uic_periodical_textbox").val(dataRow.Periodikum);$("#uic_interval_textbox").val(dataRow["Četnost"]);$("#uic_form_textbox").val(dataRow.Forma);$("#uic_type_textbox").val(dataRow.Typ)}});else if($("#currentBlockName").val()=="SchvaleniHromadneObjednavky")r=GetUrlParameter("modelId"),t=$("#uic_order_table"),t.find("tbody tr").each(function(n,t){$(t).find("td:nth-child(2)").text()!=r&&$(t).remove()}),t.find("thead tr th:nth-child(2), tbody tr td:nth-child(2), tfoot tr th:nth-child(2)").hide();else if($("#currentBlockName").val()=="NovyZastupce"){$("#uic_user_textbox").on("change",function(){var t=$(n).attr({id:"user_textbox_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this);$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button=user_textbox",data:{SearchQuery:$(this).val()},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){for($("#uic_select_user_dropdown option[value != '-1']").remove(),i=0;i<n.UserList.length;i++)currentUser=n.UserList[i],$("#uic_select_user_dropdown").append('<option value="'+currentUser.pernr+'">'+currentUser.vorna+" "+currentUser.nachn+"<\/option>")}})});$("#uic_deputy_textbox").on("change",function(){var t=$(n).attr({id:"deputy_textbox_spinner"}).css({position:"absolute",top:$(this).position().top,left:$(this).position().left+$(this).outerWidth()}).insertAfter(this);$.ajax({type:"POST",url:"/api/run/"+$("#currentAppName").val()+"/"+$("#currentBlockName").val()+"/?button=user_textbox",data:{SearchQuery:$(this).val()},error:console.error.bind(console),complete:function(){t.remove()},success:function(n){for($("#uic_select_deputy_dropdown option[value != '-1']").remove(),i=0;i<n.UserList.length;i++)currentUser=n.UserList[i],$("#uic_select_deputy_dropdown").append('<option value="'+currentUser.pernr+'">'+currentUser.vorna+" "+currentUser.nachn+"<\/option>")}})})}});$(function(){$(document).on("click",".mozaicForm [data-ajax='true']",function(){pageSpinner.show();$(document).one("ajaxComplete",function(){pageSpinner.hide()})})});$(document).ready(function(){$("#logoutLink").click(function(){return $("#logoutForm").submit(),!1})});pageSpinner=function(){var t=!1,n=1;return{show:function(i){arguments.length||(i=1);i&&$(document.body).addClass("pageSpinnerShown");n+=i;t&&(console.log("page spinner shown %d times, %d total",i,n),console.trace())},hide:function(i){arguments.length||(i=1);n-=i;n||$(document.body).removeClass("pageSpinnerShown");t&&(console.log("page spinner hidden %d times, %d remaining",i,n),console.trace())}}}();$(function(){pageSpinner.hide();$(window).on("beforeunload",function(){typeof ignoreUnload=="undefined"||window.ignoreUnload==!1?pageSpinner.show():window.ignoreUnload=!1})});ModalDialogArray=[];$(function(){$("#hideMenuIcon").on("click",function(){$(document.body).addClass("leftBarHidden")});$("#showMenuIcon").on("click",function(){$(document.body).removeClass("leftBarHidden")});$("#toggleMenuIcon").on("click",function(){$(".userBox").slideUp();$(".searchBox").slideUp();$(document.body).toggleClass("leftBarHidden")});if(CurrentModuleIs("appManagerModule")){$(".appPanel").each(function(){while($(this).collision(".appPanel").length>1)$(this).css({top:"+=120px"})});$(".appPanel").draggable({grid:[120,120],revert:"invalid",stop:function(){$(this).draggable("option","revert","invalid");$.ajax({type:"POST",url:"api/master/apps"+$(this).attr("data-target")+"/saveAppPosition",data:{positionX:$(this).css("left"),positionY:$(this).css("top")}})}});$(".appWorkspace").droppable({tolerance:"fit"});$(".appPanel").droppable({greedy:!0,tolerance:"touch",drop:function(n,t){t.draggable.draggable("option","revert",!0)}});$(".appPanel").bind("dragstart",function(n,t){t.originalPosition.top=$(this).position().top;t.originalPosition.left=$(this).position().left});$(".appPanel").on("dblclick",function(){window.location.href=$(this).attr("data-target")})}else CurrentModuleIs("helpModule")?($("#appManagerIcon").removeClass("activeIcon"),$("#helpIcon").addClass("activeIcon")):CurrentModuleIs("userDetailsModule")&&$("#appManagerIcon").removeClass("activeIcon");if($("#userLeftBar").length>0){$(".uic").each(function(n,t){$(t).attr("originalId",$(t).attr("Id"))});$(".uic > checkbox").each(function(n,t){$(t).prop("checked",!1)});$(".userBoxMinimized").click(function(){$(document.body).addClass("leftBarHidden");$(".searchBox").slideUp();$(".userBox").slideToggle()});$(".searchBoxMinimized").click(function(){$(document.body).addClass("leftBarHidden");$(".searchBox").slideToggle();$(".userBox").slideUp()});try{$(".uic.data-table").each(function(n,t){var i=$(t),u=parseInt(i.attr("uicWidth")),r;CreateCzechDataTable(i,i.hasClass("data-table-simple-mode"));wrapper=i.parents(".dataTables_wrapper");wrapper.css("position","absolute");wrapper.css("left",i.css("left"));wrapper.css("top",i.css("top"));wrapper.css("width",u+8);i.css("position","relative");i.css("left","0px");i.css("top","0px");i.wrap("<div class='inner_wrapper'>");i.on("click",".rowEditAction",function(){var n=parseInt($(this).parents("tr").find("td:first").text()),t=i.attr("name");$(this).hasClass("fa-download")&&(window.ignoreUnload=!0);$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+n+'" /><input type="hidden" name="button" value="'+t+'_EditAction" /><\/form>').appendTo("body").submit()});i.on("click",".rowDetailsAction",function(){var n=parseInt($(this).parents("tr").find("td:first").text()),t=i.attr("name");$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+n+'" /><input type="hidden" name="button" value="'+t+'_DetailsAction" /><\/form>').appendTo("body").submit()});i.on("click",".rowDeleteAction",function(){if(confirm("Jste si jistí?")){var n=parseInt($(this).parents("tr").find("td:first").text()),t=i.attr("name");$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="deleteId" value="'+n+'" /><input type="hidden" name="button" value="'+t+'_DeleteAction" /><\/form>').appendTo("body").submit()}});i.on("click",".row_A_Action",function(){var n=parseInt($(this).parents("tr").find("td:first").text()),t=i.attr("name");$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+n+'" /><input type="hidden" name="button" value="'+t+'_A_Action" /><\/form>').appendTo("body").submit()});i.on("click",".row_B_Action",function(){var n=parseInt($(this).parents("tr").find("td:first").text()),t=i.attr("name");$('<form class="hiddenForm" method="POST" action="'+window.location.href+'"><input type="hidden" name="modelId" value="'+n+'" /><input type="hidden" name="button" value="'+t+'_B_Action" /><\/form>').appendTo("body").submit()});i.DataTable().on("draw",function(){var n=$(this);n.find("thead th").each(function(t,i){($(i).text()=="id"||$(i).text().indexOf("hidden__")==0)&&n.find("td:nth-child("+(t+1)+"), th:nth-child("+(t+1)+")").hide()})});i.DataTable().draw();i.hasClass("data-table-simple-mode")||(i.find("tfoot th").each(function(){var n=$(this).text();n!="Akce"?$(this).html('<input type="text" placeholder="Hledat v &quot;'+n+'&quot;" />'):$(this).html("")}),dataTable=i.DataTable(),dataTable.columns().eq(0).each(function(n){$("input",dataTable.column(n).footer()).on("keyup change",function(){dataTable.column(n).search(this.value).draw()})}),$("#currentBlockName").val()=="ZakladniReport"?(r=$("#currentUserName").val(),dataTable.order([1,"desc"]).column(9).search(r).draw(),i.find("tfoot th:nth-child(10) input").val(r)):$("#currentBlockName").val()=="ReportProAsistentky"?(r=$("#currentUserName").val(),dataTable.order([1,"desc"]).column(4).search(r).draw(),i.find("tfoot th:nth-child(5) input").val(r)):$("#currentBlockName").val()=="ReportProVedouciPracovniky"&&(r=$("#currentUserName").val(),dataTable.order([1,"desc"]).column(4).search(r).draw(),i.find("tfoot th:nth-child(5) input").val(r)),i.find("thead th").each(function(n,t){$(t).text()=="id"||$(t).text().indexOf("hidden__")==0?i.find("td:nth-child("+(n+1)+"), th:nth-child("+(n+1)+")").hide():$(t).text()=="Barva"&&(i.find("td:nth-child("+(n+1)+"), th:nth-child("+(n+1)+")").hide(),i.find("td:nth-child("+(n+1)+")").each(function(t,i){var r=$(i).text();$(i).parents("tr").find("td:nth-child("+(n+2)+")").prepend('<div class="colorRectangle" style="background-color:'+r+'"><\/div>')}))}))})}catch(n){console.log(n)}$.extend($.validator.methods,{auditNumber:function(n){return n.match(/^[0-9]{4} [PA] [0-9]{2,3}$/)}});$.extend($.validator.methods,{auditNumberNoWF:function(n){return n.match(/^[0-9]{4} [BCEQ] [0-9]{2,3}$/)}});$.extend($.validator.methods,{auditNumberNonWF:function(n){return n.match(/^[0-9]{4} C [0-9]{2,3}$/)}});$.extend($.validator.methods,{greaterThan:function(n,t,i){return this.optional(t)||+n>+i}});$.extend($.validator.methods,{greaterOrEqual:function(n,t,i){return this.optional(t)||+n>=+i}});$.extend($.validator.methods,{optionSelected:function(n,t,i){return $(t).attr("required")==undefined||+n!=+i}});jQuery.validator.addClassRules("dropdown-select",{optionSelected:-1});mozaicFormValidator=$(".mozaicForm").validate({errorLabelContainer:$("<div>"),ignore:"[readonly]",unhighlight:function(n){$(".uic[ignoredonvalidation]").addClass("cancel");$(n).removeClass("has-error");this.numberOfInvalids()===0&&$(".uic.button-simple:not([ignoredonvalidation])").removeClass("looks-disabled")},highlight:function(n){$(".uic[ignoredonvalidation]").addClass("cancel");$(n).addClass("has-error");$(".uic.button-simple:not([ignoredonvalidation])").addClass("looks-disabled")}});$(".mozaicForm").length&&mozaicFormValidator.form();$(".uic.button-simple, .uic.button-dropdown").on("click",function(){$(".uic.data-table").each(function(n,t){var i="",r=$(t).DataTable();r.rows({search:"applied"}).data().each(function(n,t){t>0&&(i+=",");i+=n[0]});tableName=$(t).attr("name");$('input[name="'+tableName+'"').val(i)});this.value.indexOf("export")!==-1&&(window.ignoreUnload=!0)});$(".uic.input-with-datepicker").datetimepicker({datepicker:!0,timepicker:!1,format:"d.m.Y"});$(".uic.input-with-timepicker").datetimepicker({datepicker:!1,timepicker:!0,step:5,format:"H:i:00"});$(".uic.input-with-datetimepicker").datetimepicker({datepicker:!0,timepicker:!0,step:5,format:"d.m.Y H:i:00"});$(".uic.color-picker").each(function(n,t){newComponent=$(t);CreateColorPicker(newComponent);newReplacer=$("#userContentArea .sp-replacer:last");newReplacer.css("position","absolute");newReplacer.css("left",newComponent.css("left"));newReplacer.css("top",newComponent.css("top"));newComponent.removeClass("uic");newReplacer.addClass("uic color-picker");newReplacer.attr("uicClasses","color-picker");newReplacer.attr("uicName",newComponent.attr("uicName"))});$(".uic.countdown-component").each(function(n,t){var i=new Date;i.setTime(i.getTime()+3e5);$(t).countdown({until:i,format:"HMS"})});$(".uic.input-single-line").each(function(n,t){if(newComponent=$(t),autosumTargetName=newComponent.attr("writeSumInto"),autosumTargetName)newComponent.on("change",function(){autosumTargetName=$(this).attr("writeSumInto");autosumTarget=$('.uic[name="'+autosumTargetName+'"]');sourceInputName=$(this).attr("name");sourceInputNameWithoutPrefix=sourceInputName.indexOf("_")==-1?sourceInputName:sourceInputName.substring(sourceInputName.indexOf("_")+1,sourceInputName.length);sum=0;$(".uic.input-single-line").each(function(n,t){inputName=$(t).attr("name");inputName.indexOf(sourceInputNameWithoutPrefix,inputName-sourceInputNameWithoutPrefix.length)!==-1&&(numericValue=parseInt($(t).val()),isNaN(numericValue)||(multiplierTextbox=$(t).parents(".panel-component").find('[originalId="uic_pieces_textbox"]'),sum+=multiplierTextbox&&!isNaN(multiplierTextbox.val())&&multiplierTextbox.val()>0?numericValue*multiplierTextbox.val():numericValue))});autosumTarget=$('.uic[name="'+autosumTargetName+'"]');targetTemplate=autosumTarget.attr("contentTemplate");targetTemplate?autosumTarget.text(targetTemplate.replace("{{var1}}",sum)):autosumTarget.text(sum)})});$(".uic.input-single-line").on("change",function(){$(this).attr("originalId")=="uic_pieces_textbox"&&$(this).parents(".panel-component")&&RecalculateAutosum($(this).parents(".panel-component"))});$("#uic_item_count_textbox, #uic_pieces_textbox").val(1);$(".uic.panel-component").each(function(n,t){if(panel=$(t),hidingCheckboxName=panel.attr("panelHiddenBy"),hidingCheckboxName&&(hidingCheckbox=$('input[name="'+hidingCheckboxName+'"]'),hidingCheckbox)){hidingCheckbox.attr("panelToHide",panel.attr("name"));hidingCheckbox.prop("checked",!0);hidingCheckbox.on("change",function(){panelToHide=$(this).attr("panelToHide");$(this).is(":checked")?ShowPanel(panelToHide):HidePanel(panelToHide)})}if(cloningButtonName=panel.attr("panelClonedBy"),cloningButtonName&&(cloningButton=$('button[buttonName="'+cloningButtonName+'"]'),cloningButton)){cloningButton.attr("type","button");cloningButton.attr("panelToClone",panel.attr("name"));cloningButton.on("click",function(){panelToClone=$(this).attr("panelToClone");ClonePanel(panelToClone)})}});$(".uic.panel-component").each(function(n,t){RecalculatePanelDimensions($(t))});RecalculateMozaicFormHeight();$("#modalRepository .modalRepositoryItem").each(function(n,t){currentDialog=$(t);currentDialog.dialog({autoOpen:!1,width:370,height:320,buttons:{OK:function(){alert("TODO: Save");$(this).dialog("close")},"Zrušit":function(){$(this).dialog("close")}}});ModalDialogArray.push(currentDialog)});notificationMessage=GetUrlParameter("message");notificationMessage&&(notificationType=GetUrlParameter("messageType"),ShowAppNotification(notificationMessage,notificationType))}});window.jQuery||(message=/^Mozilla\/4\.0.*\bMSIE\b/.test(navigator.userAgent)?"Omlouváme se, ale Vaše verze Internet Exploreru nepodporuje základní funkce jazyka Javascript, které jsou pro chod aplikace nezbytné.  Kontaktujte helpdesk nebo administrátory platformy. ":"Omlouváme se, ale verze Vašeho prohlížeče nepodporuje základní funkce jazyka Javascript, které jsou pro chod aplikace nezbytné.  Kontaktujte helpdesk nebo administrátory platformy. ",style="body {background: white !important} body > * {display:none !important} div:first-child {display:block !important; margin: 25px; border: 5px solid red; padding: 25px; font-weight: bold}",document.body.innerHTML="<div>"+message+"<\/div><style> "+style+"<\/style>");jQuery(function(n){n.datepicker.regional.cs={closeText:"Zavřít",prevText:"Předchozí",nextText:"Další",currentText:"Dnes",monthNames:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],monthNamesShort:["Led","Úno","Bře","Dub","Kvě","Čer","Čvc","Srp","Zář","Říj","Lis","Pro"],dayNames:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],dayNamesShort:["Ne","Po","Út","St","Čt","Pá","So",],dayNamesMin:["Ne","Po","Út","St","Čt","Pá","So"],weekHeader:"Týd",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};n.datepicker.setDefaults(n.datepicker.regional.cs)});$.countdown.setDefaults($.countdown.regionalOptions.cs),function(n){n.fn.trackInputDone=function(t,i){function r(){n(this).data("inputTrackerPrevValue")!==this.value&&(n(this).trigger("inputDone"),n(this).data("inputTrackerPrevValue",this.value))}if(typeof t=="function"&&(i=t,t=null),i)this.on("inputDone",t,i);this.on("input keypress",function(t){t.type==="keypress"&&t.which===13?(t.preventDefault(),r.call(this)):(clearTimeout(n(this).data("inputTrackerTimeout")),n(this).data("inputTrackerTimeout",setTimeout(r.bind(this),1e3)))}).on("change",r)}}(jQuery);$(document).on("resize",".ui-dialog",function(n,t){setTimeout(function(){t.element.find(".ui-dialog-content").css({width:"auto",height:"calc(100% - 6em)"})},0)});