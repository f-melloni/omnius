@using FSS.Omnius.Modules.Entitron.Entity.Persona;
@using FSS.Omnius.Modules.Entitron.Entity.Master;
@using FSS.Omnius.Modules.Entitron.Entity.Tapestry;
@using FSS.Omnius.Modules.Entitron.Entity;
@{
    Page.Title = "Omnius Persona";
    Layout = "~/Views/Shared/_OmniusAdminLayout.cshtml";
    Page.ModuleClass = "personaModule";

    DBEntities e = new DBEntities();
}
<div id="upperPanel">
    <div class="panelLabel">Práva</div>
    <svg class="backgroundDecoration" width="540px" height="135px">
        <path d="M31 0 L31 28 L65 62 L376 62" stroke="#49c4f1" stroke-width="1" fill="none" />
        <path d="M31 135 L31 108 L65 74 L376 74" stroke="#49c4f1" stroke-width="1" fill="none" />
        <path d="M31 47 L52 68 L31 89 L10 68 Z" stroke="#49c4f1" stroke-width="1" fill="none" />
    </svg>
    <img class="decorationWatcheye" src="~/Content/images/watcheye_small.png" />
    <div id="hideUpperPanelIcon" class="fa fa-caret-up"></div>
</div>
<div id="minimizedUpperPanel">
    <div class="panelLabel">Práva</div>
    <div id="showUpperPanelIcon" class="fa fa-caret-down"></div>
</div>
<div id="lowerPanel">
    <h4>Práva k aplikacím</h4>
    <svg class="rightsFormUpperDecoration" width="40px" height="240px">
        <path d="M31 0 L31 235" stroke="#457fa9" stroke-width="1" fill="none"></path>
    </svg>
    <table class="table table-bordered table-striped table-responsive table-omnius">
        <thead>
            <tr>
                <th>Skupina\Aplikace</th>
                @foreach (Application app in ViewBag.Apps)
                {
                    <td>@app.DisplayName</td>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (Group group in ViewBag.Groups)
            {
                <tr>
                    <td>@group.Name</td>
                    @foreach (Application app in ViewBag.Apps)
                    {
                        <td>@AppRight.GetSpecificRights(group, app, e)</td>
                    }
                </tr>
            }
        </tbody>
    </table>
    <br />
    <h4>Práva k akcím</h4>
    <table class="table table-bordered table-striped table-responsive table-omnius">
        <thead>
            <tr>
                <th>Skupina\Akce</th>
                @foreach (ActionRule act in ViewBag.Actions)
                {
                    <td>@act.Name</td>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (Group group in ViewBag.Groups)
            {
                <tr>
                    <td>@group.Name</td>
                    @foreach (ActionRule act in ViewBag.Actions)
                    {
                        <td>@ActionRuleRight.GetSpecificRights(group, act, e)</td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>
